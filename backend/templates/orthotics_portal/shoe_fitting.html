<!-- Shoe Fitting Modal -->
<div
  class="modal fade"
  id="shoeFittingModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="shoeFittingModalLabel"
  aria-hidden="true"
  style="z-index: 1060 !important"
>
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="shoeFittingModalLabel" style="color: #ffffff;">Shoe Fitting</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <form id="shoeFittingForm" class="shoe-fitting-form">
          <div class="form-group mb-3">
            <label for="sizingStyle" class="form-label">Sizing Style</label>
            <select class="form-select" id="sizingStyle" name="sizing_style">
              <option value="mens">Men's</option>
              <option value="womens">Women's</option>
              <option value="womens_address">Women's Address</option>
            </select>
          </div>

          <div class="form-group mb-3">
            <label for="orthosisSize" class="form-label">US Foot Size</label>
            <div class="input-group">
              <button type="button" class="btn btn-outline-secondary decrement">
                âˆ’
              </button>
              <input
                type="number"
                class="form-control"
                id="orthosisSize"
                name="orthosis_size"
                value="8"
                min="4"
                max="15"
                step="0.5"
              />
              <button type="button" class="btn btn-outline-secondary increment">
                +
              </button>
            </div>
          </div>

          <div class="form-group mb-3">
            <label class="form-label">To Fit Shoe</label>
            <div class="form-check">
              <input
                type="checkbox"
                class="form-check-input"
                id="referToInsole"
                name="refer_to_insole"
              />
              <label class="form-check-label" for="referToInsole">
                Refer to Insole Template
              </label>
            </div>
            <div class="form-check">
              <input
                type="checkbox"
                class="form-check-input"
                id="shoeProvided"
                name="shoe_provided"
              />
              <label class="form-check-label" for="shoeProvided">
                Shoe Provided
              </label>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
        <button type="button" class="btn btn-primary" id="saveShoeFittingBtn">
          Save
        </button>
        <button type="button" class="btn btn-success" id="nextShoeFittingBtn">
          Save & Next
        </button>
      </div>
    </div>
  </div>
</div>

<style>
  /* Ensure shoe fitting modal is always on top */
  #shoeFittingModal {
    z-index: 1060 !important;
  }

  #shoeFittingModal .modal-dialog {
    z-index: 1070 !important;
  }

  /* Ensure the backdrop for shoe fitting modal is behind the modal but above other content */
  .modal-backdrop {
    z-index: 1050 !important;
  }

  /* Make sure form elements are clickable */
  #shoeFittingModal .modal-content {
    position: relative;
    z-index: 1070 !important;
  }

  /* Ensure form controls are interactive */
  #shoeFittingModal .form-control,
  #shoeFittingModal .btn,
  #shoeFittingModal .form-check-input {
    position: relative;
    z-index: 1;
  }

  .shoe-fitting-form {
    padding: 20px;
  }

  .shoe-fitting-form .form-row {
    margin-bottom: 1.5rem;
    display: flex;
    align-items: flex-start;
  }

  .shoe-fitting-form .form-label {
    flex: 0 0 200px;
    padding-top: 8px;
  }

  .shoe-fitting-form .form-input {
    flex: 1;
  }

  .shoe-fitting-form .info-icon {
    display: inline-block;
    width: 16px;
    height: 16px;
    line-height: 16px;
    text-align: center;
    border-radius: 50%;
    background-color: #f8f9fa;
    color: #6c757d;
    font-size: 12px;
    margin-left: 4px;
    cursor: help;
  }

  .shoe-fitting-form .number-input-container {
    display: flex;
    align-items: center;
    max-width: 200px;
  }

  .shoe-fitting-form .number-input-container input {
    text-align: center;
    border-radius: 0;
    border-left: none;
    border-right: none;
  }

  .shoe-fitting-form .number-input-container button {
    width: 40px;
    height: 38px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
  }

  .shoe-fitting-form .number-input-container .decrement {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }

  .shoe-fitting-form .number-input-container .increment {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }

  .shoe-fitting-form .checkbox-options {
    padding-top: 8px;
  }

  .shoe-fitting-form .custom-checkbox {
    margin-bottom: 10px;
  }

  .shoe-fitting-form .custom-select {
    max-width: 200px;
  }

  /* Tooltip styling */
  [title] {
    position: relative;
    cursor: help;
  }

  [title]:hover::after {
    content: attr(title);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    padding: 5px 10px;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    z-index: 1000;
  }
</style>
